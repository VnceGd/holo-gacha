<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Hololive gacha project">
        <meta name="theme-color" content="#8df"/>

        <title>Holo Gacha</title>
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="icon" href="assets/img/favicon.ico">
        <link rel="apple-touch-icon" href="assets/img/icons-192.png">

        <link rel="stylesheet" href="assets/css/main.css">
        <link rel="stylesheet" href="assets/css/theme.css">

        <script src="assets/js/theme.js" defer></script>
        <script src="assets/js/member.js" defer></script>
        <script src="assets/js/audio.js" defer></script>
        <script src="assets/js/index.js" defer></script>

        <script>
        // Check that service workers are supported
        if ('serviceWorker' in navigator) {
            // Use the window load event to keep the page load performant
            window.addEventListener('load', _ => {
                navigator.serviceWorker.register('service-worker.js', { scope: '/holo-gacha/' })
                .then( registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope)
                }, err => {
                    console.log('ServiceWorker registration failed: ', err)
                })
            })
        }
        </script>
    </head>
    <body>
        <main>
            <div id="main">
                <div class="member-card">
                    <div class="background"></div>
                    <img id="full-illust" src="assets/img/polka/full.png" alt="Full Illustration">
                    <button class="tap-head" onclick="interact(area.HEAD)" aria-label="Tap head">
                    <button class="tap-chest" onclick="interact(area.CHEST)" aria-label="Tap chest">
                </div>
                <div class="button-group">
                    <button class="float-bottom-right" onclick="toggleMenu(menu.SETTINGS)" aria-label="Open settings">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <rect width="100%" height="20%"/>
                                <rect y="40%" width="100%" height="20%"/>
                                <rect y="80%" width="100%" height="20%"/>
                            </g>
                        </svg>
                    </button>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.THEME_SELECT)" aria-label="Open theme select">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <path d="M0 1 .1 .6 .2 .5 .5 .5 .5 .8 .4 .9 Z"/>
                                <path d="M.95 0 1 .05 .6 .6 .6 .4 .4 .4 Z"/>
                            </g>
                        </svg>
                    </button>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.MEMBER_SELECT)" aria-label="Open member select">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <circle cx=".5" cy=".4" r=".3"></circle>
                                <path d="M.5 .4 .85 .8 .9 1 .1 1 .15 .8 Z"/>
                            </g>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="settings" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <button class="exit-menu" onclick="toggleMenu(menu.SETTINGS)" aria-label="Close settings">
                            <svg viewBox="0 0 1 1">
                                <g id="exit-svg" fill="var(--fg-color)">
                                    <path d="M.1 0 1 .9 .9 1 0 .1"/>
                                    <path d="M.9 0 0 .9 .1 1 1 .1"/>
                                </g>
                            </svg>
                        </button>
                    </div>
                    <div class="panel-content">
                        <h2>Audio</h2>
                        <input id="audio" type="range" list="volume-levels" value="100" onchange="changeVolume()" oninput="changeVolume()">
                        <input id="audio-value" type="number" value="100" min="0" max="100" onchange="changeVolumeValue()">
                        <h2>About</h2>
                        <p>This is an un-official, fan-made project and is NOT affiliated with Hololive or Cover Corporation.</p>
                        <p>Visit the project's source code to learn more.</p>
                        <a id="source-link" href="https://github.com/VnceGd/holo-gacha">Source code (GitHub)</a>
                    </div>
                </div>
            </div>
            <div id="theme-select" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Theme Select</h2>
                        <button class="exit-menu" onclick="toggleMenu(menu.THEME_SELECT)" aria-label="Close settings">
                            <svg viewBox="0 0 1 1">
                                <use xlink:href="#exit-svg"/>
                            </svg>
                        </button>
                    </div>
                    <div id="theme-grid" class="panel-content grid">
                        <!-- Auto populated -->
                    </div>
                </div>
            </div>
            <div id="member-select" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Member Select</h2>
                        <button class="exit-menu" onclick="toggleMenu(menu.MEMBER_SELECT)" aria-label="Close settings">
                            <svg viewBox="0 0 1 1">
                                <use xlink:href="#exit-svg"/>
                            </svg>
                        </button>
                    </div>
                    <div id="member-grid" class="panel-content grid">
                        <!-- Auto populated -->
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>