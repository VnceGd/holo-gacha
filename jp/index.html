<!DOCTYPE html>
<html lang="jp">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Hololive gacha project">
        <meta name="theme-color" content="#8df"/>

        <title>ホロガチャ</title>
        <base href="..">
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="icon" href="assets/img/favicon.ico">
        <link rel="apple-touch-icon" href="assets/img/icons-192.png">

        <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/main.css">
        <link rel="stylesheet" href="assets/css/theme.css">
        <link rel="stylesheet" href="assets/css/gacha.css">

        <script src="assets/js/theme.js" defer></script>
        <script src="assets/js/game.js" defer></script>
        <script src="assets/js/member.js" defer></script>
        <script src="assets/js/audio.js" defer></script>
        <script src="assets/js/gacha.js" defer></script>
        <script src="assets/js/index.js" defer></script>

        <script>
        // Check that service workers are supported
        // if ('serviceWorker' in navigator) {
        //     // Use the window load event to keep the page load performant
        //     window.addEventListener('load', _ => {
        //         navigator.serviceWorker.register('service-worker.js')
        //         .then( registration => {
        //             console.log('ServiceWorker registration successful with scope: ', registration.scope)
        //         }, err => {
        //             console.log('ServiceWorker registration failed: ', err)
        //         })
        //     })
        // }
        </script>
    </head>
    <body>
        <main>
            <div id="main">
                <div class="member-card">
                    <div class="background"></div>
                    <img id="full-illust" src="assets/img/polka/full.png" alt="Full Illustration">
                    <button class="tap-head" onclick="interact(area.HEAD)" aria-label="Tap head">
                    <button class="tap-chest" onclick="interact(area.CHEST)" aria-label="Tap chest">
                </div>
                <div class="button-group" id="interface">
                    <p id="holocoin-text"><span id="holocoin-amount">0</span> HoloCoins</p>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.SETTINGS)" aria-label="Open settings">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <rect width="100%" height="20%"/>
                                <rect y="40%" width="100%" height="20%"/>
                                <rect y="80%" width="100%" height="20%"/>
                            </g>
                        </svg>
                        <p class="tooltip right">設定</p>
                    </button>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.MEMBER_SELECT)" aria-label="Open member select">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <circle cx=".5" cy=".4" r=".3"></circle>
                                <path d="M.5 .4 .85 .8 .9 1 .1 1 .15 .8 Z"/>
                            </g>
                        </svg>
                        <p class="tooltip right">キャラクタ</p>
                    </button>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.THEME_SELECT)" aria-label="Open theme select">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <path d="M0 1 .1 .6 .2 .5 .5 .5 .5 .8 .4 .9 Z"/>
                                <path d="M.95 0 1 .05 .6 .6 .6 .4 .4 .4 Z"/>
                            </g>
                        </svg>
                        <p class="tooltip right">テーマ</p>
                    </button>
                    <button class="float-bottom-right" onclick="toggleMenu(menu.GAME_SELECT)" aria-label="Open game select">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <path d="M.3 .2 .7 .2 .85 .3 .9 .7 .75 .8 .6 .6 .4 .6 .25 .8 .1 .7 .15 .3 Z"/>
                            </g>
                        </svg>
                        <p class="tooltip right">ゲーム</p>
                    </button>
                    <button class="float-bottom-right" onclick="openBannerMenu()">
                        <svg viewBox="0 0 1 1">
                            <g fill="var(--fg-color)">
                                <path d="M.2 .1 .9 .4 .2 .8"/>
                                <path fill-opacity=".6" d="M.2 .2 .9 .5 .2 .9"/>
                                <path fill-opacity=".4" d="M.2 .3 .9 .6 .2 1"/>
                            </g>
                        </svg>
                        <p class="tooltip right">ガチャ</p>
                    </button>
                </div>
            </div>
            <div id="settings" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <button class="exit-menu" onclick="toggleMenu(menu.SETTINGS)" aria-label="Close settings">
                            <svg viewBox="0 0 1 1">
                                <g id="exit-svg" fill="var(--fg-color)">
                                    <path d="M.1 0 1 .9 .9 1 0 .1"/>
                                    <path d="M.9 0 0 .9 .1 1 1 .1"/>
                                </g>
                            </svg>
                        </button>
                    </div>
                    <div class="panel-content">
                        <h2>設定</h2>
                        <h3>言語</h3>
                        <select name="lang" id="lang-select" onchange="selectLanguage()">
                            <option value="en">English</option>
                            <option value="jp">日本語 (WIP)</option>
                        </select>
                        <h3>オーディオ</h3>
                        <input id="audio" type="range" list="volume-levels" value="100" onchange="changeVolume()" oninput="changeVolume()">
                        <input id="audio-value" type="number" value="100" min="0" max="100" onchange="changeVolumeValue()">
                        <h3>インターフェース</h3>
                        <label>
                            <input type="checkbox" onclick=toggleInterface()></input>
                            <span>Hide interface</span>
                        </label>
                        <h3>Data</h3>
                        <button class="alert" onclick="clearData()">Clear Data</button>
                        <h3>About</h3>
                        <p>This is an unofficial, fan-made project and is NOT affiliated with Hololive or Cover Corporation.</p>
                        <p>To learn more or report any issues, visit the source code.</p>
                        <a id="source-link" href="https://github.com/VnceGd/holo-gacha" target="_blank" rel="noreferrer">Source code (GitHub)</a>
                    </div>
                </div>
            </div>
            <div id="theme-select" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <h2>テーマ</h2>
                        <button class="exit-menu" onclick="toggleMenu(menu.THEME_SELECT)" aria-label="Close themes">
                            <svg viewBox="0 0 1 1">
                                <use xlink:href="#exit-svg"/>
                            </svg>
                        </button>
                    </div>
                    <div id="theme-grid" class="panel-content grid">
                        <!-- Auto populated -->
                    </div>
                </div>
            </div>
            <div id="member-select" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <h2>キャラクタ</h2>
                        <p>並べ替え
                            <select name="member-sort" id="member-sort-select" onchange="sortMemberGrid()">
                                <option value="gen">期生</option>
                                <option value="surname">姓</option>
                                <option value="givenname">名</option>
                            </select>
                            <label class="custom-checkbox" onchange="reverseSortOrder()">
                                <input id="member-sort-order" type="checkbox">
                                <span class="checkmark"></span>
                                <span id="sort-order-txt"></span>
                            </label>
                        </p>
                        <button class="exit-menu" onclick="toggleMenu(menu.MEMBER_SELECT)" aria-label="Close members">
                            <svg viewBox="0 0 1 1">
                                <use xlink:href="#exit-svg"/>
                            </svg>
                        </button>
                    </div>
                    <div id="member-grid" class="panel-content grid">
                        <!-- Auto populated -->
                    </div>
                </div>
            </div>
            <div id="game-select" class="menu">
                <div class="panel">
                    <div class="panel-header">
                        <h2>ゲーム</h2>
                        <button class="exit-menu" onclick="toggleMenu(menu.GAME_SELECT)" aria-label="Close games">
                            <svg viewBox="0 0 1 1">
                                <use xlink:href="#exit-svg"/>
                            </svg>
                        </button>
                    </div>
                    <div id="game-grid" class="panel-content grid">
                        <!-- Auto populated -->
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>